import React, { useState, useEffect } from 'react';
import itemData from '../data/data';
import AppsIcon from '@mui/icons-material/Apps';
import TableRowsIcon from '@mui/icons-material/TableRows';
import TuneIcon from '@mui/icons-material/Tune';
import AddShoppingCartIcon from '@mui/icons-material/AddShoppingCart';
import Stars from '../components/Stars/Stars';
import ShopFilter from '../components/ShopFilter/ShopFilter';
import './css/Shop.css';
import { FilterForm } from '../interface/interfaces';

export default function Shop() {
    const [orgSort, setOrgSort] = useState<string>("featured");
    const [orgLayout, setOrgLayout] = useState<"tile"|"row">("tile");
    const [filterForm, setFilterForm] = useState<FilterForm>({
        remedy: [],
        form: [],
        priceMax: undefined,
        sales: false,
    })

    const openFilter = () => {
        document.getElementById("background_nav").classList.add("side_nav_background_open");
        document.getElementById('shp_filter').classList.add("shp_filter_open");
    }

    const closeFilter = () => {
        document.getElementById("background_nav").classList.remove("side_nav_background_open");
        document.getElementById('shp_filter').classList.remove("shp_filter_open");
    }

    return(
        <div className="shp_cont">
            <div id="shp_filter" className="shp_filter">
                <ShopFilter form={filterForm} setForm={setFilterForm}/>

            </div>


            <div className='shp_display'>
                <div className='shp_display_org'>
                    <div className="shp_display_org_layout_filter">
                        <button onClick={() => {openFilter()}} className="shp_filter_toggle"><TuneIcon fontSize='large' sx={{color:'#696969', marginRight:'1rem'}}/></button>
                        <button onClick={() => {setOrgLayout("tile")}}><AppsIcon fontSize='large' sx={orgLayout === "tile" ? {color:'#696969'} : {color:'#CACACA'}} /></button>
                        <button onClick={() => {setOrgLayout("row")}}><TableRowsIcon fontSize='large' sx={orgLayout === "tile" ? {color:'#CACACA'} : {color:'#696969'}} /></button>
                    </div>
                    <div className='shp_display_org_sort'>
                        <span>Sort by</span>
                        <select value={orgSort} onChange={(e)=>{setOrgSort(e.target.value)}}>
                            <option value='featured'>Featured</option>
                            <option value='lowToHigh'>Price: Low to High</option>
                            <option value='highToLow'>Price: High to Low</option>
                            <option value='rated'>Highest Rated</option>
                            <option value='alphabet'>Alphabetically</option>
                        </select>
                    </div>
                </div>
                <div className='shp_display_org_hr'></div>

                <div className={orgLayout === 'tile' ? 'shp_display_tile' : 'shp_display_row'}>
                    { itemData.map((item) => {
                        if (orgLayout === "tile") {
                            return (
                                <div className='shp_tile' key={item.name}>
                                    <div className='shp_tile_img_cont'>
                                        <img className="shp_tile_img" src={item.image} alt={item.name} />
                                        <div className='shp_tile_interaction'>
                                            <button className="shp_tile_interaction_cart">
                                                <AddShoppingCartIcon fontSize='large' sx={{fontSize:'4.2rem'}}/>
                                            </button>
                                            <button className="shp_tile_interaction_details">Details</button>
                                        </div>
                                    </div>
                                    <div className='shp_tile_title'>{item.name}</div>
                                    <div className='shp_tile_stars'><Stars rating={item.stars} /></div>
                                    <div className='shp_tile_price'>${item.price}</div>
                                </div>
                            );
                        }
                        if (orgLayout === "row") {
                            return (
                                <div className="shp_row" key={item.name} >
                                    <img className="shp_row_img" src={item.image} alt={item.name} />
                                    <div className="shp_row_details_cont">
                                        <div className="shp_row_header">
                                            <div className="shp_row_title">{item.name}</div>
                                            <Stars rating={item.stars} />
                                        </div>
                                        <div className="shp_row_description">{item.description}</div>
                                        <div className="shp_row_footer">
                                            <div className='shp_row_price'>${item.price}</div>
                                            <div className="shp_row_btns">
                                                <button>Details</button>
                                                <button style={{position:'relative'}}><span>Add to cart </span><AddShoppingCartIcon fontSize='small' sx={{fontSize:"17px",position:'absolute',right:'8px'}}/></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            );
                        }
                    }) }
                </div>
            </div>


            <div className='shp_cart'>


            </div>
        </div>
    );
}